Спрощена модель автомобіля для тривимірної ігри в умовах обмежених ресурсів.

Зміст
Введення
Розділ 1. Аналіз предметної області та постанова задачі.
    1.1 Моделювання фізики у вимогливих до ресурсів системах.
Розділ 2. Огляд засобів розробки.
    2.1 Рендеринг в реальному часі.
        2.1.1 DirectX.
        2.1.2 OpenGL.
            2.1.2.1 WebGL.
    2.2 Сучасні веб-технології, графіка в браузері.
        2.2.1 JavaScript
        2.2.2 HTML 5 Canvas API.
        2.2.3 WebGL (OpenGL ES 2.0).
        2.2.4 Three.js.
    2.3 Огляз засобів розробки тривимірних моделей.
    2.4 Формати даних для зберігання тривимірних моделей.
Розділ 3. Опис програмної реалізації.
    3.1 Розробка спрощеної математичної моделі автівки.
        3.1.1 Двигун.
        3.1.2 Трансмісія.
        3.1.3 Колеса.
        3.1.4 Кермування.
        3.1.5 Підвіска.
    3.2 Розробка ігрового інтерфесу.
        3.2.1 Розташування моделі та камери.
        3.2.2 Зв’язок між розташуванням камери та показниками моделі.
            3.2.2.1 Швидкість.
            3.2.2.2 Поворот керма та швидкість.
    3.3 Управління.
Розділ 4. Охорона праці.
    4.1 Правові основи охорони праці
        4.1.1 Державне управління охороною праці та нормативно-правові акти з охорони праці
    4.2 Класифікація причин і методи аналізу виробничого травматизму та профзахворювань
        4.2.1 Основні причини виробничого травматизму і профзахворюваннь та заходи щодо їхнього попередження
    4.3 Основи фізіології, гігієни праці та виробничої санітарії
        4.3.1 Виробниче освітлення
    4.4 Основи техніки безпеки на виробництві
        4.4.1 Безпека умов праці при використанні персональних комп’ютерів
    4.5 Основи пожежної безпеки
        4.5.1 Пожежна безпека на виробництві
Література.
Додатки.

Введення
З кожним роком у вз’яку з росповсюдженням і зростанням пропускної здатності всесвітньої мережі Інтернет,
збільшенням потужності сучасних комп’ютерів та появною інноваційних веб-технологій,
притаманних раніше лише застосункам встановленим в ос,
зростає актуальність перенесення типових десктопних програм до вебу.
Медіапреєри, графічні редактори, текстові редактори, інтерфейси СУБД, словники,
геоінформаційні системи і багато іншогих категорій прикладного програмного забеспечення
станом на 2014 рік вдало освоїлися у вигляді веб-застосунків. Окремо стоять ігри,
як один з найвимогливіших до оточення видів ПЗ, ця категорія не поспішає долучитися до сучасної моди.
Привабливість веба як платформи для ігор в відсутності необхідності встановлювати застосунок на комп’ютер
переймаючись безпекою системи, натомість його можна зберегти використвуючи HTML 5 Cache Manifest.
До того ж зважаючи на вплив соціальних сервісів в сучасному суспільстві веб-ігри отримують перевагу через
простоту інтеграції з ними.
За аналітікою Gathner на базі Android, iOS, WindowsPhone чи BlackBerry у 2013 було продано
близько мільярда смартфонів та близько 200 000 планшетів.
Веб-застосунки мають доступ до всієї різноманітності цих мобільних платформ апріорі бо все, що вони потребують це
доступ до Інтернету та сучасний браузер. До недоліків веб-застосунків відносяться повільність та обмеженість JavaScript
як основного язика для розробки чи віртуальної машини (якщо основний язик розробки транслюється в JavaScript).
Деякі нововведення та технології в сучасних браузерах покращують ситуацію з повільністю (HTML 5 Workers,
оптимізації у движку V8), але не драматично.
Ціль моєї дипломної роботи довести придатність веба як платформи для розробки ігор, а токож навести приклади
оптімізацій для браузерних графічних застосунків.
Використвуючи технології HTML 5 Canvas API, WebGL та розробивши оптимізовану під певні умови обмежених вичислювальних
можливостей математичну модель можливо досягти задовільної продуктивності веб-застосунку - ігри.
Я аналізував досвід західних компаній та ентузіастів у використанні вельми молодої технології WebGL,
вивчав документи про розробку ігрової фізики автомобіля, опубліковані компанією Dolphinity (гра Racer),
а також відомий в узьких колах тутріал "Car Physics for Games" за авторством анонімного юзера з нікнеймом Marco Monster.
Актуальність цієї теми буде зростати з часом, бо потужність комп’ютериів і швидкиість мережі з часом лише зростатимуть,
технологія WebGL здобуватиме все більше прехильників і розроників, а браузерні ігри ставатимуть популярнішими.
В першому розділі детальний опис задачі, в другому розділі огляд сучасних технологій, які використвують в розробці ігор,
в третьому розділі деталі моєї реалізаціі гри, а також опис математичної моделі автівки.

Розділ 1. Аналіз предметної області та постанова задачі.
Гоночні симулятори це різновид відеоігор, де гравець управляє автомабілем. Ви можете розважатися рулюючи швидкою та
потужною машиною, взрізаючись або просто створюючи у грі сценарії, на котрі не зважилися би в реальному житті.
Відомі приклади таких симуляторів: Need For Speed з аркадною фізикою, Gran Turismo з більш наближеною до дійсності.
В відкритому доступі є лише один бескоштовний для не-комерціного використання проект рівня попередніх прикладів,
це гра Racer (2000), фізика якої розроблена за ретельно розробленими технічними документами задля реалістиного відчуття.
Для мого симулятора авто також потрібен ігровий рушій. Він повинен мати достатньо (як для гри) реалістичну фізику автівки.
Фізика може бути аркадною або максимально наближеною до дійсності. У будь якому разі мінімально необхідні якості
моделі це:
- прискорення
- гальмування
- кермування
- рухлива підвіска
- розподіл мас
- занесення
Вже з цим мінімально-необхідним набором властивостей моделі ми отримуємо можливість візуально реалістично моделювати рух авто.
До всього того також потрібна візуалізація. Для веб-застосунку безальтернативним варіантом є WebGL, технологія і
бібліотека для беспосереднього використання потужностей відеокарти для рендерінка тривимірної графіки в браузері.
Отже, задача: розробити гру - гоночноий симулятор на JavaScript, яка буде виконуватися в браузері та використовувати рушій
з математичною моделлю, здатною справно працювати в реальному часі в умовах ресурсів веб-застосунку.

1.1 Моделювання фізики у вимогливих до ресурсів системах.
Головна архітектурна задача при створенні фізичної моделі, яка буде працювати в реальному часі, це з’ясувати які
фізичні процеси необхідні, а якими можна знехтувати. Наприклад проектуючи модель падіння каміння з висоти 1 метр
не можна нехтувати прискоренням вільного падіння, але можна знехтувати впливом гравітиції Луни.
Головна ідея: не треба створювати дійсність, треба створити щось накшталт.
В випадку в авто можна знехтувати температурою двигуна, спростити розрахунки супротиву,
об’єднавши супротив двигуна та трансмісії і тому подібне.
Ее можна забувати, що треба прораховувати фізику в реальному часі, тобто синхронно з рендерінгом, для кожного кадра.
Це обмежує систему, але для однієї автівки буде достатньо, якщо симуляція працює в сучасному браузері
на комп’ютері чи смартфоні з відеочіпом.

Розділ 2. Огляд засобів розробки.
2.1 Рендеринг в реальному часі.
2.1.1 DirectX.
DirectX — це набір API функцій, розроблених для простого і ефективного вирішення завдань, пов'язаних з ігровим
і відеопрограмуванням під Microsoft Windows. Найширше використовується при написанні комп'ютерних ігор.
Практично всі частини DirectX API є набори COM-сумісних об'єктів.
Багато сучасних пристроїв мають тільки DirectX-сумісні драйвера, іншими словами, користувач повинен встановити
DirectX для використання всіх можливостей пристрою. У цей час система оновлення драйверів Windows Update
дозволяє завантажувати тільки необхідні бібліотеки, а не весь драйвер цілком.
Через те, що DirectX працює тільки на платформі Windows, а також не підтримується натівно в сучасних
браузерах станом на 2014 рік для моєї задачі ця технологія не підходить.

2.1.2 OpenGL.
OpenGL — (англ. Open Graphics Library — відкрита графічна бібліотека) — специфікація, що визначає незалежний від
мови програмування крос-платформовий програмний інтерфейс (API) для написання застосунків, що використовують
2D та 3D комп'ютерну графіку. Цей інтерфейс містить понад 250 функцій, які можуть використовуватися для
малювання складних тривимірних сцен з простих примітивів. Широко застосовується індустрією комп'ютерних ігор
і віртуальної реальності, у графічних інтерфейсах (Compiz, Clutter), при візуалізації наукових даних, в системах
автоматизованого проектування тощо.
На базовому рівні, OpenGL — це всього лиш специфікація, себто, це — просто документ, який описує набір функцій
і їх точну поведінку. На основі цих специфікацій виробники апаратного забезпечення створюють реалізації — бібліотеки
функцій, які відповідають заявленій в OpenGL специфікації. Ці реалізації проектуються для того, щоб при можливості
використовувати можливості апаратного забезпечення. Коли апаратне прискорення не допускається, виконання функцій
здійснюється за допомогою програмного забезпечення. Виробники повинні пройти спеціальні тести на відповідність,
перш, ніж їхню реалізацію класифікуватимуть, як реалізацію OpenGL. Таким чином, розробникам програмного забезпечення
необхідно всього лиш навчитися використовувати описані у специфікації функції, і лишити їхню реалізацію за
розробниками апаратного забезпечення.
Ефективні реалізації OpenGL існують для операційних систем Linux, MacOS X, Microsoft Windows та багатьох
UNIX-подібних ОС, а також для таких ігрових боксів, як Sony PlayStation 3. Різні програмні реалізації OpenGL
існують для платформ, виробники яких не підтримують дану специфікацію.
OpenGL орієнтується на такі два завдання: Сховати складності адаптації різних 3D-прискорювачів, надаючи розробнику
єдиний API. Приховати відмінності в можливостях апаратних платформ, вимагаючи реалізації відсутньої функціональності за
допомогою програмної емуляції. Основним принципом роботи OpenGL є отримання наборів векторних графічних примітивів
у вигляді точок, ліній та багатокутників з наступною математичною обробкою отриманих даних та побудовою растрової картинки
на екрані і/або в пам'яті. Векторні трансформації та растеризация виконуються графічним конвеєром (graphics pipeline),
який власне являє собою дискретний автомат. Абсолютна більшість команд OpenGL потрапляють в одну з двох груп:
або вони додають графічні примітиви на вхід в конвеєр, або конфігурують конвеєр на різне виконання трансформацій.
OpenGL є низькорівневим процедурним API, що змушує програміста диктувати точну послідовність кроків, щоб побудувати
результуючу растрову графіку (імперативний підхід). Це є основною відмінністю від дескрипторних підходів, коли
вся сцена передається у вигляді структури даних (найчастіше дерева), яке обробляється і будується на екрані.
З одного боку, імперативний підхід вимагає від програміста глибокого знання законів тривимірної графіки та
математичних моделей, з іншого боку — дає свободу впровадження різних інновацій.

2.2 Сучасні веб-технології, графіка в браузері.
2.2.1 JavaScript
JavaScript — назва реалізації стандарту мови програмування ECMAScript компанії Netscape, базується на принципах
прототипного програмування. Найпоширеніше і найвідоміше застосування мови — написання сценаріїв для веб-сторінок,
але, також, використовується для впровадження сценаріїв керування об’єктами вбудованими в інші програми.
JavaScript має низку властивостей об’єктно-орієнтованої мови, але завдяки концепції прототипів підтримка
об’єктів в ній відрізняється від традиційних мов ООП. Крім того, JavaScript має ряд властивостей, притаманних
функціональним мовам, — функції як об’єкти першого рівня, об’єкти як списки, каррінг (currying), анонімні функції,
замикання (closures) — що додає мові додаткову гнучкість.

2.2.2 HTML 5 Canvas API.
Canvas (англ. canvas — «полотно») — елемент HTML5, який можна застосовувати для малювання графіки використовуючи
скрипти (переважно JavaScript). Наприклад його можна застосувати для малювання графів, створення фотокомпозицій
а також анімації.
Елемент <canvas> є частиною специфікації WhatWG Web applications 1.0, що відома як HTML 5.
<canvas> вперше було втілено Apple в Mac OS X Dashboard Safari. У Gecko підтримка canvas з'явилася в версії 1.5,
у Presto з версії 9.0 веб-браузера Opera. Internet Explorer підтримує canvas починаючи з 9-ї версії.
<canvas> створює поверхню для малювання, яка надає один або більше контекстів для відтворення, який використовується
для створення відображуваного контенту і маніпуляцій з ним. Ми сфокусуємо на 2D (двомірному) контексті відтворення,
який в наш час є єдиним певним контекстом. У майбутньому інші контексти зможуть підтримувати інші види відтворення:
наприклад, цілком ймовірно, що буде додано 3D контекст, заснований на OpenGL ES (WebGL).

2.2.3 WebGL (OpenGL ES 2.0).
WebGL — це стандарт на базі OpenGL ES 2.0, що дозволяє розробникам веб-контенту вбудовувати в веб-оглядачі, які
підтримують HTML5, повноцінну 3D-графіку, не вдаючись до посередництва плагінів. В намірах розробників поширити
стандарт WebGL не тільки в браузерах персональних комп'ютерів, а й у мобільних інтернет-пристроях. До робочої групи
WebGL входять Khronos Group, представники провідних розробників інтернет-браузерів, таких як Apple Safari, Google
Chrome, Mozilla Firefox і Opera, а також фахівці AMD і Nvidia.
Ця технологія дозволяє упроваджувати апаратно-прискорену 3D графіку у веб-сторінки без необхідності використовувати
спеціальні плагіни веб-браузера на будь-якій платформі, що підтримує OpenGL або OpenGL ES. Технічно це буде прив'язкою
JavaScript-скриптів до функцій, визначених в бібліотеках OpenGL ES 2.0, реалізовану на рівні браузера.

2.2.4 Three.js.
Three.js — це легка кросбраузерна бібліотека JavaScript, яка використовується для створення та відображення
анімованої комп’ютерної 3D графіки при розробці веб-застосунків.
Three.js дозволяє створювати прискорену на GPU 3D графіку, використвуя язик JavaScript як частину сайта без
підключення пропрієтарних плагінів для браузера. Це можливо завдяки використанню технології WebGL.

Особливості:

Рендери: Canvas, SVG або WebGL
Сцена: додавання та видалення об’єктів у режимі реального часу; туман
Камери: перспективна або ортографічна
Анімація: каркаси, швидка кінематика, зворотня кінематика, покадрова анімація
Джерела світу: зовнішні, направлені, точечні; тіні: одкинуті та отримані
Шейдери: повний доступ до всіх OpenGL шейдерів (GLSL)
Об’єкти: мережі, частки, "спрайти", лінії, скелетна анимація та інше
Геометрія: поверхня, куб, сфера, тор, 3D текст та інше; модифікатори: тканина, видавлювання
Завантажувачі даних: двоічний, зображення, JSON та сцена
Експорт та імпорт: утиліти, створюющі Three.js-сумісні JSON файли з форматів: Blender, openCTM, FBX, 3D Studio Max, Wavefront (.obj) та COLLADA (.dae)
Підтримка: документація з API бібліотеки знаходиться в стані постійного розширення й доповнення, існує публічний форум і велика спільнота
Приклатди: на офіційному сайті можливо знайти більше 150 прикладів роботы з шрифтами, моделями, текстурами, звуком та іншими елементами сцени
Бібліотека Three.js працює у всіх браузерах, підтримуючиї технологію WebGL; також може працювати з «чистим» інтерфейсом елемента CANVAS,
завдяки чому працює і на багатьох мобільних пристроях.
Three.js розповсюджується за ліцензією MIT license.

2.3 Огляз засобів розробки тривимірних моделей.
Autodesk 3ds Max — повнофункціональна пропієтарна професійна програмна система для створення і редагування тривимірної
графіки і анімації, розроблена компанією Autodesk. Містить найсучасніші засоби для художників і фахівців в області
мультимедіа.

Autodesk Maya — рішення для 3D моделювання, анімації і рендеринга, що використовується при створенні фільмів,
телепрограм, ігор і дизайн-проектів. Maya має відкриту архітектуру, тому всю роботу можна записати в скрипт або
запрограмувати, використовуючи API-інтерфейс або одину з двох вбудованих мов програмування — Maya Embedded Language
(MEL) або Python.

Blender — безкоштовний пакет для створення тривимірної (3D) комп’ютерної графіки, що містить засоби моделювання,
анімації, рендерингу, після-обробки відео, а також створення ігор. Функцій Blender цілком достатньо для роботи як
звичайним користувачам, так і професіоналам. У програмі є всі основні інструменти, що використовуються в професійних
3D-редакторах.
У порівняно невеликий обсяг Blender вміщено повноцінний редактор з усіма основними функціями та набором текстур,
моделей та обробників подій. Додаткові можливості в Blender реалізуються за рахунок підключення плагінів — як
офіційних, створених авторами редактора, так і розроблених користувачами.
Основні можливості Blender:
— Підтримка різноманітних геометричних примітивів (включаючи полігональні моделі, систему швидкого моделювання
в режимі SubSurf, криві Без’є, поверхні NURBS, метасфери, скульптурне моделювання та векторні шрифти).
— Універсальні вбудовані механізми рендерингу та інтеграція з YafRay.
— Інструменти анімації, серед яких інверсна кінематика, скелетна анімація та сіткова деформація, анімація по ключовим
кадрам, нелінійна анімація, timeline коефіцієнтів вершин, обмежувачі, динаміка м’яких тіл, динаміка твердих тіл, система
волосся на основі частинок та система частинок при визначенні колізій.
— Python використовується як засіб створення інструментів і прототипів, системи логіки в іграх, як засіб імпорту та
експорту файлів, автоматизації завдань.
— Базові функції нелінійного редагування відео.
— Game Blender — підпроект Blender, що надає інтерактивні функції, такі як визначення колізій, рушій динаміки та
програмована логіка.

Програма є вільним програмним забезпеченням та розповсюджується під ліцензією GNU GPL.
Характерною особливістю пакету Blender є його невеликий розмір та підтримка багатьох популярних операційних систем.

2.4 Формати даних для зберігання тривимірних моделей.
COLLADA (.dae) — xml формат, разроблений для обміну між 3D додатками, підтримується Three.js.
Підтримує морфічну анімацію, не підтримує скелетну.
OBJ (чи .OBJ) — формат файлу опису геометрії, вперше створений в Wavefront Technologies для їх анімаційного пакету
Advanced Visualizer. Це відкритий файловий формат, і він був прийнятий іншими розробниками 3d редакторів, як стандартний.
OBJ Формат  дуже простий, і задає тільки геометрію об'єкта, а якщо конкретно, то координати кожної вершини, її
текстурні координати, нормалі, і грані, що задаються списками вершин многокутників. Вершини многокутників за
замовчуванням задаються проти годинникової стрілки, роблячи явне задання нормалей необов'язковим.
Не підтримує зберігання анімації.
JSON Three.js (Blender Exporter) — json формат, розроблений спеціально для Three.js, підтримує морфічну та скелетну анімацію.

Розділ 3. Опис програмної реалізації.

Деякі елементи движка розраховуються через диференційні рівняння, тож TOREPLACE: deltа буде
проміжоком часу між кадрами. Майже всі властивості автівки залежать від користувацького вводу.

Література.
http://www.gamedev.ru/code/articles/?id=4193
http://www.asawicki.info/Mirror/Car%20Physics%20for%20Games/Car%20Physics%20for%20Games.html
http://www.racer.nl/
http://uk.wikipedia.org/wiki/DirectX
http://uk.wikipedia.org/wiki/OpenGL
http://uk.wikipedia.org/wiki/WebGL
http://uk.wikipedia.org/wiki/Canvas
http://wiki.blender.org/index.php/UK/Main_Page
OpenGL ES 2.0 Programming Guide, Addison Wesley, August 2008
http://threejs.org/docs/
